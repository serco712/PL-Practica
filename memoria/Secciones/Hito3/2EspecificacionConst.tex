\chapterA{Especificación del constructor ATS's mediante una gramatica s-atribuida   }
.
\section{Especificación del Constructor de ASTs}

\begin{math}
    programa \longrightarrow bloque \\
    | \hspace{1cm}  programa.\textbf{a} \;= bloque.\textbf{a}\\
     bloque \longrightarrow \{\;declaraciones\;instrucciones\;\}\\
    | \hspace{1cm}  bloque.\textbf{a} \;= \textbf{bloq}(declaraciones.\textbf{a},instrucciones.\textbf{a})\\
    declaraciones \longrightarrow lista$-$declaraciones\;\&\& \\
    | \hspace{1cm}declaraciones.\textbf{a} \;= \textbf{si$\_$decs}(lista$-$declaraciones.\textbf{a})\\
    declaraciones \longrightarrow \epsilon\\
    | \hspace{1cm}declaraciones.\textbf{a} \;= \textbf{no$\_$decs}()\\
     lista$-$declaraciones \longrightarrow lista$-$declaraciones\;;\;declaracion\\
    | \hspace{1cm}lista$-$declaraciones_0.\textbf{a} \;= \textbf{muchas$\_$decs}(lista$-$declaraciones_1.\textbf{a},declaracion.\textbf{a})\\
    lista$-$declaraciones \longrightarrow declaracion\\ 
    | \hspace{1cm}lista$-$declaraciones.\textbf{a} \;= \textbf{una$\_$dec}(declaracion.\textbf{a})\\  
    lista$-$variables \longrightarrow lista$-$variables\;,\;variable\\
    | \hspace{1cm}lista$-$variables_0.\textbf{a} \;= \textbf{muchas$\_$var}(lista$-$variables_1.\textbf{a},variable.\textbf{a})\\
    lista$-$variables \longrightarrow variable\\
    | \hspace{1cm}lista$-$variables.\textbf{a} \;= \textbf{una$\_$var}(  variable.\textbf{a})\\
    variable \longrightarrow tipo\;\textbf{identificador}\\
    | \hspace{1cm}variable.\textbf{a} \;= \textbf{var}(tipo.\textbf{a},\textbf{identificador.lex})\\
    declaracion \longrightarrow variable\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$simple}(variable.\textbf{a})\\
    declaracion \longrightarrow \textbf{type}\;variable\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$type}(variable.\textbf{a})\\
    declaracion \longrightarrow \textbf{proc identificador}\;par$-$formales\;bloque\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$proc}(\textbf{identificador.lex}, par$-$formales.\textbf{a},bloque.\textbf{a})\\
   % declaracion \longrightarrow \textbf{type}\;\textbf{struct}\;\{\;lista$-$variables\;\}\;\textbf{identificador}\\
    tipo \longrightarrow tipo[\textbf{literalEntero}]\\
    | \hspace{1cm}tipo.\textbf{a} \;=\textbf{tipo$\_$array}(tipo.\textbf{a},\textbf{literalEntero.lex})\\
    tipo \longrightarrow tipo2\\
    | \hspace{1cm}tipo.\textbf{a} \;= tipo2.\textbf{a}\\
    tipo2 \longrightarrow \hat{}\;tipo2\\
    | \hspace{1cm}tipo2.\textbf{a} \;=\textbf{tipo$\_$punt}(tipo2.\textbf{a})\\
    tipo2 \longrightarrow tipo3\\
    | \hspace{1cm}tipo2.\textbf{a} \;= tipo3.\textbf{a}\\
    tipo3 \longrightarrow \textbf{bool}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$bool}\\
    tipo3 \longrightarrow \textbf{int}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$int}\\
    tipo3 \longrightarrow \textbf{real}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$real}\\
    tipo3 \longrightarrow \textbf{string}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$string}\\
    tipo3 \longrightarrow \textbf{identificador}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$ident}(\textbf{identificador.lex})\\
     tipo3 \longrightarrow \textbf{struct}\;\{\;lista$-$variables\;\}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$struct}(lista$-$variables.\textbf{a})\\
    instrucciones \longrightarrow lista$-$instrucciones\\
    | \hspace{1cm}instrucciones.\textbf{a} \;=\textbf{si$\_$inst}(lista$-$instrucciones.\textbf{a})\\
    instrucciones \longrightarrow \epsilon\\
    | \hspace{1cm}instrucciones.\textbf{a} \;=\textbf{no$\_$inst}()\\
    lista$-$instrucciones \longrightarrow lista$-$instrucciones\;;\;instruccion\\
    | \hspace{1cm}lista$-$instrucciones_0.\textbf{a} \;= \textbf{muchas$\_$inst}(lista$-$instrucciones_1.\textbf{a},instruccion.\textbf{a})\\
    lista$-$instrucciones \longrightarrow instruccion\\
    | \hspace{1cm}lista$-$instrucciones.\textbf{a} \;= \textbf{una$\_$inst}(instruccion.\textbf{a})\\
    par$-$formales \longrightarrow (lista$-$par$-$formal)\\
    | \hspace{1cm}par$-$formales.\textbf{a} \;= \textbf{si$\_$pformal}(lista$-$par$-$formal.\textbf{a})\\
    par$-$formales \longrightarrow ()\\
    | \hspace{1cm}par$-$formales.\textbf{a} \;= \textbf{no$\_$pformal}()\\
    lista$-$par$-$formal \longrightarrow par$-$formal,lista$-$par$-$formal\\
    | \hspace{1cm}lista$-$par$-$formal_0.\textbf{a} \;= \textbf{muchos$\_$pformal}(par$-$formal.\textbf{a},lista$-$par$-$formal_1.\textbf{a})\\ 
    lista$-$par$-$formal \longrightarrow par$-$formal\\
    | \hspace{1cm}lista$-$par$-$formal.\textbf{a} \;= \textbf{un$\_$pformal}(par$-$formal.\textbf{a})\\ 
    par$-$formal \longrightarrow tipo\;\&\textbf{identificador}\\
    | \hspace{1cm}par$-$formal.\textbf{a} \;= \textbf{pformal$\_$ref}(tipo.\textbf{a},\textbf{indentificador.lex})\\
    par$-$formal \longrightarrow tipo\;\textbf{identificador}\\
    | \hspace{1cm}par$-$formal.\textbf{a} \;= \textbf{pformal$\_$noref}(tipo.\textbf{a},\textbf{indentificador.lex})\\
    par$-$reales \longrightarrow (lista$-$par$-$real)\\
    | \hspace{1cm}par$-$reales.\textbf{a} \;= \textbf{si$\_$preales}(lista$-$par$-$real.\textbf{a})\\
    par$-$reales \longrightarrow ()\\
    | \hspace{1cm}par$-$reales.\textbf{a} \;= \textbf{no$\_$preales}()\\
    lista$-$par$-$real \longrightarrow lista$-$par$-$real,E0\\
    | \hspace{1cm}lista$-$par$-$real_0.\textbf{a} \;=  \textbf{muchas$\_$exp}(E0.\textbf{a},lista$-$par$-$real_1.\textbf{a})\\ 
    lista$-$par$-$real \longrightarrow E0\\
    | \hspace{1cm}lista$-$par$-$real.\textbf{a} \;=  \textbf{una$\_$exp}(E0.\textbf{a})\\ 
    instruccion \longrightarrow eval\\
    | \hspace{1cm}instruccion.\textbf{a} \;= eval.\textbf{a}\\
    instruccion \longrightarrow @\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$eval}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{if}\;E0\;\;bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$if}(E0.\textbf{a}, bloque.\textbf{a})\\
    instruccion \longrightarrow \textbf{if}\;E0\;\;bloque\;\textbf{else}\;bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$else}(E0.\textbf{a}, bloque_0.\textbf{a},bloque_1.\textbf{a})\\
    instruccion \longrightarrow \textbf{while}\;E0\;bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$while}(E0.\textbf{a}, bloque.\textbf{a})\\
    instruccion \longrightarrow \textbf{new}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$new}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{delete}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$delete}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{read}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$read}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{write}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$write}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{call}\;\textbf{identificador}\;par$-$reales\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$call}(\textbf{identificador.a},par$-$reales.\textbf{a})\\
    instruccion \longrightarrow \textbf{nl}\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$nl}()\\
    instruccion \longrightarrow bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$blo}(bloque.\textbf{a})\\
    E0 \longrightarrow E1 = E0\\
    | \hspace{1cm}E0_0.\textbf{a} \;= \textbf{exp$\_$asig}(E1.\textbf{a},E0_1.\textbf{a})\\
    E0 \longrightarrow E1\\
    | \hspace{1cm}E0.\textbf{a} \;= E1.\textbf{a}\\
    E1 \longrightarrow E1\;\;OP1\;\;E2\\
    | \hspace{1cm}E1_0.\textbf{a} \;= \textbf{mkop}(OP1.\textbf{op},E1_1.\textbf{a},E2.\textbf{a})\\
    E1 \longrightarrow E2\\
    | \hspace{1cm}E1.\textbf{a} \;= E2.\textbf{a}\\
    E2 \longrightarrow E2 + E3\\
    | \hspace{1cm}E2_0.\textbf{a} \;= \textbf{exp$\_$suma}(E2_1.\textbf{a},E3.\textbf{a})\\
    E2 \longrightarrow E3 - E3\\
    | \hspace{1cm}E2.\textbf{a} \;= \textbf{exp$\_$resta}(E3_0.\textbf{a},E3_1.\textbf{a})\\
    E2 \longrightarrow E3\\
    | \hspace{1cm}E2.\textbf{a} \;= E3.\textbf{a}\\
    E3 \longrightarrow E4\;\;and\;\;E3\\
    | \hspace{1cm}E3_0.\textbf{a} \;= \textbf{exp$\_$and}(E4.\textbf{a},E3_1.\textbf{a})\\ 
    E3 \longrightarrow E4\;\;or\;\;E4\\
    | \hspace{1cm}E3.\textbf{a} \;= \textbf{exp$\_$or}(E4_0.\textbf{a},E4_1.\textbf{a})\\
    E3 \longrightarrow E4\\
    | \hspace{1cm}E3.\textbf{a} \;= E4.\textbf{a}\\
    E4 \longrightarrow E4\;\;OP4\;\;E5\\
    | \hspace{1cm}E4_0.\textbf{a} \;= \textbf{mkop}(OP4.\textbf{op},E4_1.\textbf{a},E5.\textbf{a})\\
    E4 \longrightarrow E5\\ 
    | \hspace{1cm}E4.\textbf{a} \;= E5.\textbf{a}\\
    E5 \longrightarrow -\;E5\\
    | \hspace{1cm}E5_0.\textbf{a} \;= \textbf{exp$\_$menos}(E5_1.\textbf{a})\\
    E5 \longrightarrow \textbf{not}\;E5\\
    | \hspace{1cm}E5_0.\textbf{a} \;= \textbf{exp$\_$not}(E5_1.\textbf{a})\\
    E5 \longrightarrow E6\\
    | \hspace{1cm}E5.\textbf{a} \;= E6.\textbf{a}\\
    E6 \longrightarrow E6\;[\;E0\;]\\
    | \hspace{1cm}E6_0.\textbf{a} \;= \textbf{exp$\_$index}(E6_1.\textbf{a}, E0.\textbf{a})\\  
    E6 \longrightarrow E6.\textbf{identificador}\\
    | \hspace{1cm}E6_0.\textbf{a} \;= \textbf{exp$\_$reg}(E6_1.\textbf{a},\textbf{identificador.lex})\\  
    E6 \longrightarrow E6\;\hat{}\\
    | \hspace{1cm}E6_0.\textbf{a} \;= \textbf{exp$\_$ind}(E6_1.\textbf{a})\\    
    E6 \longrightarrow E7\\
    | \hspace{1cm}E6.\textbf{a} \;= E7.\textbf{a}\\
    E7 \longrightarrow \textbf{true}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$true}()\\
    E7 \longrightarrow \textbf{false}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$false}()\\
    E7 \longrightarrow \textbf{literalEntero}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litEnt}(\textbf{literalEntero.lex})\\
    E7 \longrightarrow \textbf{literalReal}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litReal}(\textbf{literalReal.lex})\\
    E7 \longrightarrow \textbf{literalCadena}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litCad}(\textbf{literalCadena.lex})\\
    E7 \longrightarrow \textbf{identificador}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$iden}(\textbf{identificador.lex})\\
    E7 \longrightarrow \textbf{null}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$null}()\\
    E7 \longrightarrow (\;E0\;)\\
    | \hspace{1cm}E7.\textbf{a} \;= E0.\textbf{a}\\
    OP1 \longrightarrow \;<\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;<\;''}\\  
    OP1 \longrightarrow \;<=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;<=\;''}\\  
    OP1 \longrightarrow \;>\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;>\;''}\\  
    OP1 \longrightarrow \;>=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;>=\;''}\\  
    OP1 \longrightarrow \;==\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;==\;''}\\  
    OP1 \longrightarrow \;!=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;!=\;''}\\  
    OP4 \longrightarrow \;*\\
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;*\;''}\\  
    OP4 \longrightarrow \;/\\
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;/\;''}\\  
    OP4 \longrightarrow \; \%\\  
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;\%\;''}\\ 
\\
\\
\\
    fun \;\textbf{mkop}(op,opnd1,opnd2):\\
    | \hspace{1cm}op\;=\; ``<" \longrightarrow return\;\textbf{exp$\_$menor}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``<=" \longrightarrow return\;\textbf{exp$\_$menIgual}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``>" \longrightarrow return\;\textbf{exp$\_$mayor}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``>=" \longrightarrow return\;\textbf{exp$\_$mayIgual}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``==" \longrightarrow return\;\textbf{exp$\_$igual}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``\!=" \longrightarrow return\;\textbf{exp$\_$dist}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``*" \longrightarrow return\;\textbf{exp$\_$mult}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``/" \longrightarrow return\;\textbf{exp$\_$div}(opnd1,opnd2)\\
    | \hspace{1cm}op\;=\; ``\%" \longrightarrow return\;\textbf{exp$\_$mod}(opnd1,opnd2)\\
\\

    
\end{math}



    

\chapterA{Acondicionamiento de la especificaci√≥n del constructor ATS's}

\begin{math}
    programa \longrightarrow bloque \\
    | \hspace{1cm}  programa.\textbf{a} \;= broque.\textbf{a}\\
     bloque \longrightarrow \{\;declaraciones\;instrucciones\;\}\\
    | \hspace{1cm}  bloque.\textbf{a} \;= \textbf{bloq}(declaraciones.\textbf{a},instrucciones.\textbf{a})\\
    declaraciones \longrightarrow lista$-$declaraciones\;\&\& \\
    | \hspace{1cm}declaraciones.\textbf{a} \;= \textbf{si$\_$decs}(lista$-$declaraciones.\textbf{a})\\
    declaraciones \longrightarrow \epsilon\\
    | \hspace{1cm}declaraciones.\textbf{a} \;= \textbf{no$\_$decs}()\\
    lista$-$declaraciones \longrightarrow declaracion\;rlista$-$decs\\
    | \hspace{1cm}rlista$-$decs.\textbf{ah} \;= \textbf{una$\_$dec}(declaracion.\textbf{a})\\
    | \hspace{1cm}lista$-$declaraciones.\textbf{a} \;= rlista$-$decs.\textbf{a}\\  
    rlista$-$decs \longrightarrow ;\;declaracion\;rlista$-$decs\\ 
    | \hspace{1cm}rlista$-$decs_1.\textbf{ah} \;= \textbf{muchas$\_$decs}(rlista$-$decs_0.\textbf{ah},declaracion.\textbf{a})\\  
    | \hspace{1cm}rlista$-$decs_0.\textbf{a} \;= rlista$-$decs_1.\textbf{a}\\
    rlista$-$decs \longrightarrow \epsilon\\
    | \hspace{1cm}rlista$-$decs.\textbf{a} \;= rlista$-$decs.\textbf{ah}\\
    lista$-$variables \longrightarrow variable\;rlista$-$var\\
    | \hspace{1cm}rlista$-$var.\textbf{ah} \;= \textbf{una$\_$var}(variable.\textbf{a})\\
    | \hspace{1cm}lista$-$variables.\textbf{a} \;= rlista$-$var.\textbf{a}\\  
    rlista$-$var \longrightarrow ,\;variable\;rlista$-$var\\ 
    | \hspace{1cm}rlista$-$var_1.\textbf{ah} \;= \textbf{muchas$\_$var}(rlista$-$var_0.\textbf{ah},variable.\textbf{a})\\  
    | \hspace{1cm}rlista$-$var_0.\textbf{a} \;= rlista$-$var_1.\textbf{a}\\
    rlista$-$var \longrightarrow \epsilon\\
    | \hspace{1cm}rlista$-$var.\textbf{a} \;= rlista$-$var.\textbf{ah}\\
    variable \longrightarrow tipo\;\textbf{identificador}\\
    | \hspace{1cm}variable.\textbf{a}\;= \textbf{var}(tipo.\textbf{a},\textbf{identificador.lex})\\
    declaracion \longrightarrow variable\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$simple}(variable.\textbf{a})\\
    declaracion \longrightarrow \textbf{type}\;variable\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$type}(variable.\textbf{a})\\
    declaracion \longrightarrow \textbf{identificador}\;par$-$formales\;bloque\\
    | \hspace{1cm}declaracion.\textbf{a} \;=\textbf{dec$\_$proc}(\textbf{identificador.lex}, par$-$formales.\textbf{a},bloque.\textbf{a})\\
   % declaracion \longrightarrow \textbf{type}\;\textbf{struct}\;\{\;lista$-$variables\;\}\;\textbf{identificador}\\
    tipo \longrightarrow tipo2\;rtipo\\
    | \hspace{1cm}rtipo.\textbf{ah} \;= tipo2.\textbf{a}\\
    | \hspace{1cm}tipo.\textbf{a} \;= rtipo.\textbf{a}\\  
    rtipo \longrightarrow [\textbf{literalEntero}]\;rtipo\\ 
    | \hspace{1cm}rtipo_1.\textbf{ah} \;= \textbf{tipo$\_$array}(rtipo_0.\textbf{ah},\textbf{literalEntero.lex})\\
    | \hspace{1cm}rtipo_0.\textbf{a} \;= rtipo_1.\textbf{a}\\
    tipo2 \longrightarrow \hat{}\;tipo2\\
    | \hspace{1cm}tipo2.\textbf{a} \;=\textbf{tipo$\_$punt}(tipo2.\textbf{a})\\
    tipo2 \longrightarrow tipo3\\
    | \hspace{1cm}tipo2.\textbf{a} \;= tipo3.\textbf{a}\\
    tipo3 \longrightarrow \textbf{bool}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$bool}\\
    tipo3 \longrightarrow \textbf{int}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$int}\\
    tipo3 \longrightarrow \textbf{real}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$real}\\
    tipo3 \longrightarrow \textbf{string}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$string}\\
    tipo3 \longrightarrow \textbf{identificador}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$ident}(\textbf{identificador.lex})\\
     tipo3 \longrightarrow \textbf{struct}\;\{\;lista$-$variables\;\}\\
    | \hspace{1cm}tipo3.\textbf{a} \;=\textbf{tipo$\_$struct}(lista$-$variables.\textbf{a})\\
    instrucciones \longrightarrow lista$-$instrucciones\\
    | \hspace{1cm}instrucciones.\textbf{a} \;=\textbf{si$\_$inst}(lista$-$instrucciones.\textbf{a})\\
    instrucciones \longrightarrow \epsilon\\
    | \hspace{1cm}instrucciones.\textbf{a} \;=\textbf{no$\_$inst}()\\
    lista$-$instrucciones \longrightarrow instruccion\;rlista$-$inst\\
    | \hspace{1cm}rlista$-$inst.\textbf{ah} \;= \textbf{una$\_$inst}(instruccion.\textbf{a})\\
    | \hspace{1cm}lista$-$instrucciones.\textbf{a} \;= rlista$-$inst.\textbf{a}\\  
    rlista$-$inst \longrightarrow ;\;instruccion\;rlista$-$inst\\ 
    | \hspace{1cm}rlista$-$inst_1.\textbf{ah} \;= \textbf{muchas$\_$inst}(rlista$-$inst_0.\textbf{ah},instruccion.\textbf{a})\\  
    | \hspace{1cm}rlista$-$inst_0.\textbf{a} \;= rlista$-$inst_1.\textbf{a}\\
    rlista$-$inst \longrightarrow \epsilon\\
    | \hspace{1cm}rlista$-$inst.\textbf{a} \;= rlista$-$inst.\textbf{ah}\\
    par$-$formales \longrightarrow (rpar$-$formales\\
    | \hspace{1cm}rpar$-$formales.\textbf{ah} \;= \textbf{no$\_$pformal}()\\
    | \hspace{1cm}par$-$formales.\textbf{a} \;= }rpar$-$formales.\textbf{a}\\
    rpar$-$formales \longrightarrow lista$-$par$-$formal)\\
    | \hspace{1cm}rpar$-$formales.\textbf{a} \;= \textbf{si$\_$pformal}(lista$-$par$-$formal.\textbf{a})\\
    rpar$-$formales \longrightarrow )\\
    | \hspace{1cm}rpar$-$formales.\textbf{a} \;= \textbf{no$\_$pformal}()\\
    lista$-$par$-$formal \longrightarrow par$-$formal\; rlista$-$par$-$formal\\
    | \hspace{1cm}rlista$-$par$-$formal.\textbf{ah} \;= \textbf{un$\_$pformal}(par$-$formal.\textbf{a})\\
    | \hspace{1cm}lista$-$par$-$formal.\textbf{a} \;= rlista$-$par$-$formal.\textbf{a}\\
    rlista$-$par$-$formal \longrightarrow ,\;par$-$formal\; rlista$-$par$-$formal\\
    | \hspace{1cm}rlista$-$par$-$formal_1.\textbf{ah} \;= \textbf{muchos$\_$pformal}(par$-$formal.\textbf{a},rlista$-$par$-$formal_0.\textbf{ah})\\ 
    | \hspace{1cm}rlista$-$par$-$formal_0.\textbf{a} \;= rlista$-$par$-$formal_1.\textbf{a}\\
    rlista$-$par$-$formal \longrightarrow \epsilon\\
    | \hspace{1cm}rlista$-$par$-$formal.\textbf{a} \;= rlista$-$par$-$formal.\textbf{ah}\\
    par$-$formal \longrightarrow tipo\;rpar$-$formal\\
    | \hspace{1cm}rpar$-$formal.\textbf{ah} \;= tipo.\textbf{a}\\
    | \hspace{1cm}par$-$formal.\textbf{a} \;= rpar$-$formal.\textbf{a}\\
    rpar$-$formal \longrightarrow \&\textbf{identificador}\\
    | \hspace{1cm}rpar$-$formal.\textbf{a} \;= \textbf{pformal$\_$ref}(tipo.\textbf{a},\textbf{indentificador.lex})\\
    rpar$-$formal \longrightarrow \textbf{identificador}\\
    | \hspace{1cm}rpar$-$formal.\textbf{a} \;= \textbf{pformal$\_$noref}(tipo.\textbf{a},\textbf{indentificador.lex})\\
    par$-$reales \longrightarrow (rpar$-$reales\\
    | \hspace{1cm}rpar$-$reales.\textbf{ah} \;= \textbf{no$\_$preales}()\\
    | \hspace{1cm}par$-$reales.\textbf{a} \;= rpar$-$reales.\textbf{a}\\
    rpar$-$reales \longrightarrow lista$-$par$-$real)\\
    | \hspace{1cm}rpar$-$reales.\textbf{a} \;= \textbf{si$\_$preales}(lista$-$par$-$real.\textbf{a})\\
    rpar$-$reales \longrightarrow )\\
    | \hspace{1cm}rpar$-$reales.\textbf{a} \;= \textbf{no$\_$preales}()\\
    lista$-$par$-$real \longrightarrow E0\;rlista$-$par$-$real\\
    | \hspace{1cm}rlista$-$par$-$real.\textbf{ah} \;= \textbf{una$\_$exp}(E0.\textbf{a})\\ 
    | \hspace{1cm}lista$-$par$-$real.\textbf{a} \;= lista$-$par$-$real.\textbf{a}\\ 
    rlista$-$par$-$real \longrightarrow ,\;lista$-$par$-$real\\
    | \hspace{1cm}rlista$-$par$-$real_1.\textbf{ah} \;=  \textbf{muchas$\_$exp}(E0.\textbf{a},rlista$-$par$-$real_0.\textbf{ah})\\ 
    | \hspace{1cm}rlista$-$par$-$real_0.\textbf{a} \;=  rlista$-$par$-$real_1.\textbf{a}\\ 
    rlista$-$par$-$real \longrightarrow \epsilon\\
    | \hspace{1cm}rlista$-$par$-$real.\textbf{a} \;=  \textbf{una$\_$exp}(E0.\textbf{a})\\ 
    instruccion \longrightarrow eval\\
    | \hspace{1cm}instruccion.\textbf{a} \;= eval.\textbf{a}\\
    instruccion \longrightarrow @\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$eval}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{if}\;E0\;\;bloque\;rif\\
    | \hspace{1cm}rif.\textbf{ah} \;= \textbf{inst$\_$if}(E0.\textbf{a}, bloque.\textbf{a})\\
    | \hspace{1cm}instruccion.\textbf{a} \;= rif.\textbf{a}\\
    rif \longrightarrow \textbf{else}\;bloque\\
    | \hspace{1cm}rif.\textbf{a} \;= \textbf{inst$\_$else}(E0.\textbf{a}, bloque_0.\textbf{a},bloque_1.\textbf{a})\\
    rif \longrightarrow \epsilon\\
    | \hspace{1cm}rif.\textbf{a} \;= rif.\textbf{ah}\\
    instruccion \longrightarrow \textbf{while}\;E0\;bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$while}(E0.\textbf{a}, bloque.\textbf{a})\\
    instruccion \longrightarrow \textbf{new}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$new}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{delete}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$delete}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{read}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$read}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{write}\;E0\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$write}(E0.\textbf{a})\\
    instruccion \longrightarrow \textbf{call}\;\textbf{identificador}\;par$-$reales\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$call}(\textbf{identificador.a},par$-$reales.\textbf{a})\\
    instruccion \longrightarrow \textbf{nl}\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$nl}()\\
    instruccion \longrightarrow bloque\\
    | \hspace{1cm}instruccion.\textbf{a} \;= \textbf{inst$\_$blo}(bloque.\textbf{a})\\
    E0 \longrightarrow E1\;rE0\\
    | \hspace{1cm}rE0.\textbf{ah} \;= E1.\textbf{a}\\
    | \hspace{1cm}E0.\textbf{a} \;= rE0.\textbf{a}\\
    rE0 \longrightarrow = E0\\
    | \hspace{1cm}rE0.\textbf{a} \;= \textbf{exp$\_$asig}(E1.\textbf{a},E0.\textbf{a})\\
    rE0 \longrightarrow \epsilon\\
    | \hspace{1cm}rE0.\textbf{a} \;= rE0.\textbf{ah}\\
    E1 \longrightarrow E2\;rE1\\
    | \hspace{1cm}rE1.\textbf{ah} \;= E2.a\\
    | \hspace{1cm}E1.\textbf{a} \;= rE1.\textbf{a}\\  
    rE1 \longrightarrow OP1\;E2\;rE1\\ 
    | \hspace{1cm}rE1_1.\textbf{ah} \;= \textbf{mkop}(OP1.\textbf{op},rE1_0.\textbf{ah},E2.\textbf{a})\\  
    | \hspace{1cm}rE1_0.\textbf{a} \;= rE1_1.\textbf{a}\\
    rE1 \longrightarrow \epsilon\\
    | \hspace{1cm}rE1.\textbf{a} \;= rE1.\textbf{ah}\\
    E2 \longrightarrow E3\;rE2'\;rE2\\
    | \hspace{1cm}rE2'.\textbf{ah} \;= E3.\textbf{a}\\
    | \hspace{1cm}rE2.\textbf{ah} \;= rE2'.\textbf{a}\\
    | \hspace{1cm}E2.\textbf{a} \;= rE2.\textbf{a}\\  
    rE2' \longrightarrow -\;E3\\ 
    | \hspace{1cm}rE2'.\textbf{a} \;= \textbf{exp$\_$resta}(rE3_0.\textbf{a},E3_1.\textbf{a})\\ 
    rE2' \longrightarrow \epsilon\\ 
    | \hspace{1cm}rE2'.\textbf{a} \;= rE2'.\textbf{ah}\\  
    rE2 \longrightarrow +\;E3\;rE2\\ 
    | \hspace{1cm}rE2_1.\textbf{ah} \;= \textbf{exp$\_$suma}(rE2_0.\textbf{ah},E3.\textbf{a})\\ 
    | \hspace{1cm}rE2_0.\textbf{a} \;= rE2_1.\textbf{a}\\
    rE2 \longrightarrow \epsilon\\
    | \hspace{1cm}rE2.\textbf{a} \;= rE2.\textbf{ah}\\
    E3 \longrightarrow E4\;rE3\\
    | \hspace{1cm}rE3.\textbf{ah} \;= E4.\textbf{a}\\
    | \hspace{1cm}E3.\textbf{a} \;= rE3.\textbf{a}\\
    rE3 \longrightarrow and\;\;E3\\
    | \hspace{1cm}rE3.\textbf{a} \;= \textbf{exp$\_$and}(E4.\textbf{a},E3.\textbf{a})\\ 
    rE3 \longrightarrow or\;\;E4\\
    | \hspace{1cm}rE3.\textbf{a} \;= \textbf{exp$\_$or}(E4_0.\textbf{a},E4_1.\textbf{a})\\
    rE3 \longrightarrow \epsilon\\
    | \hspace{1cm}rE3.\textbf{a} \;= rE3.\textbf{a}\\
    E4 \longrightarrow E5\;rE4\\
    | \hspace{1cm}rE4.\textbf{ah} \;= E5.a\\
    | \hspace{1cm}E4.\textbf{a} \;= rE4.\textbf{a}\\  
    rE4 \longrightarrow OP4\;E5\;rE4\\ 
    | \hspace{1cm}rE4_1.\textbf{ah} \;= \textbf{mkop}(OP4.\textbf{op},rE4_0.\textbf{ah},E5.\textbf{a})\\  
    | \hspace{1cm}rE4_0.\textbf{a} \;= rE4_1.\textbf{a}\\
    rE4 \longrightarrow \epsilon\\
    | \hspace{1cm}rE4.\textbf{a} \;= rE4.\textbf{ah}\\
    E5 \longrightarrow -\;E5\\
    | \hspace{1cm}E5_0.\textbf{a} \;= \textbf{exp$\_$menos}(E5_1.\textbf{a})\\
    E5 \longrightarrow \textbf{not}\;E5\\
    | \hspace{1cm}E5_0.\textbf{a} \;= \textbf{exp$\_$not}(E5_1.\textbf{a})\\
    E5 \longrightarrow E6\\
    | \hspace{1cm}E5.\textbf{a} \;= E6.\textbf{a}\\
    E6 \longrightarrow E7\;rE6\\
    | \hspace{1cm}rE6.\textbf{ah} \;= E7.a\\
    | \hspace{1cm}E6.\textbf{a} \;= rE6.\textbf{a}\\  
    rE6 \longrightarrow [E0]\;rE6\\ 
    | \hspace{1cm}rE6_1.\textbf{ah} \;= exp_index(rE6_0.\textbf{ah}, E0.\textbf{a})\\  
    | \hspace{1cm}rE6_0.\textbf{a} \;= rE6_1.\textbf{a}\\
    rE6 \longrightarrow \;\textbf{identificador}\;rE6\\ 
    | \hspace{1cm}rE6_1.\textbf{ah} \;= exp_reg(rE6_0.\textbf{ah},\textbf{identificador.lex})\\  
    | \hspace{1cm}rE6_0.\textbf{a} \;= rE6_1.\textbf{a}\\
    rE6 \longrightarrow \;\;\hat{}\;rE6\\ 
    | \hspace{1cm}rE6_1.\textbf{ah} \;=  exp_ind(rE6_0.\textbf{a}) \\  
    | \hspace{1cm}rE6_0.\textbf{a} \;= rE6_1.\textbf{a}\\
    rE6 \longrightarrow \epsilon\\
    | \hspace{1cm}rE6.\textbf{a} \;= rE6.\textbf{ah}\\ 
    E7 \longrightarrow \textbf{true}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$true}()\\
    E7 \longrightarrow \textbf{false}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$false}()\\
    E7 \longrightarrow \textbf{literalEntero}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litEnt}(\textbf{literalEntero.lex})\\
    E7 \longrightarrow \textbf{literalReal}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litReal}(\textbf{literalReal.lex})\\
    E7 \longrightarrow \textbf{literalCadena}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$litCad}(\textbf{literalCadena.lex})\\
    E7 \longrightarrow \textbf{.identificador}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$iden}(\textbf{identificador.lex})\\
    E7 \longrightarrow \textbf{null}\\
    | \hspace{1cm}E7.\textbf{a} \;= \textbf{exp$\_$null}()\\
    E7 \longrightarrow (\;E0\;)\\
    | \hspace{1cm}E7.\textbf{a} \;= E.\textbf{a}\\
    OP1 \longrightarrow \;<\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;<\;''}\\  
    OP1 \longrightarrow \;<=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;<=\;''}\\  
    OP1 \longrightarrow \;>\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;>\;''}\\  
    OP1 \longrightarrow \;>=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;>=\;''}\\  
    OP1 \longrightarrow \;==\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;==\;''}\\  
    OP1 \longrightarrow \;!=\\
    | \hspace{1cm}OP1.\textbf{op} \;=\; \textbf{``\;!=\;''}\\  
    OP4 \longrightarrow \;*\\
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;*\;''}\\  
    OP4 \longrightarrow \;/\\
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;/\;''}\\  
    OP4 \longrightarrow \;\%\\  
    | \hspace{1cm}OP4.\textbf{op} \;=\; \textbf{``\;\%\;''}\\

\end{math}

\chapterA{Especificación del procesamiento de asignación de espacio}
\begin{lstlisting}

    global dir = 0 //contador de direcciones
    global nivel = 0 //nivel de anidamiento
    
    asig-espacio(prog(Blo)):
        asig-espacio(Blo)

    asig-espacio(bloq(Decs,Insts)):
        asig-espacio(Decs)
        asig-espacio(Insts)
    
    asig-espacio1(si_decs(LDecs)):
        asig-espacio(Ldecs)
    
    asig-espacio(no_decs()): skip
    
    asig-espacio(muchas_decs(LDecs,Dec)):
        asig-espacio(LDecs)
        asig-espacio(Dec)
    
    asig-espacio(una_dec(Dec)):
        asig-espacio(Dec)

    asig-espacio(muchas_var(LVar,Var)):
        asig-espacio(LVar)
        asig-espacio(Var)

    asig-espacio(una_var(Var)):
        asig-espacio(Var)
    
    asig-espacio(var(Tipo,id)):
        $.dir = dir
        $.nivel = nivel
        asig-espacio-tipo(Tipo)
        dir += Tipo.tam
    
    asig-espacio(dec_simple(Var)):
        asig-espacio(Var)

    asig-espacio(dec_type(Var)):
        asig-espacio(Var)
    
    asig-espacio(dec_proc(id,PFmls,Blo)):
        ant_dir = dir 
        nivel = nivel + 1
        $.nivel = nivel
        dir = 0 
        asigna_espacio(PFmls)
        asigna_espacio(Blo)
        $.tam_datos = dir 
        dir = ant_dir 
        nivel = nivel - 1 
        
    asig-espacio-tipo(Tipo):
            si indefinido(Tipo.tam) 
                asig-espacio-tipo1(Tipo) 
                asig-espacio-tipo2(Tipo)
            fin s

            
    asig-espacio-tipo1(tipo_array(Tipo,litEnt)):
        $.tam = litEnt.tam
        si Tipo != ref(_)
            asig-espacio-tipo1(Tipo)
        fin si

    asig-espacio-tipo2(tipo_array(Tipo,litEnt)):
        si Tipo = ref(id)
            sea Tipo.vinculo = dec_type(Tipo’,_)
                asig-espacio-tipo(Tipo’) 
            $.tam= Tipo’.tam
        fin si 

    asig-espacio-tipo1(tipo_punt(Tipo)):
        $.tam = 1
        si Tipo != tipo_ident(_)
            asig-espacio-tipo1(Tipo)
        fin si

    asig-espacio-tipo2(tipo_punt(Tipo)):
        si Tipo = tipo_ident(id)
            sea Tipo.vinculo = var(Tipo’,_)
                asig-espacio-tipo(Tipo’) 
            $.tam= Tipo’.tam
        fin si 
 

    asig-espacio-tipo1(tipo_bool()): 
        $.tam = 1

    asig-espacio-tipo2(tipo_bool()): skip

    asig-espacio-tipo1(tipo_int()): 
        $.tam = 1

    asig-espacio-tipo2(tipo_int()): skip

    asig-espacio-tipo1(tipo_real()): 
        $.tam = 1

    asig-espacio-tipo2(tipo_real()): skip

    asig-espacio-tipo1(tipo_string()): 
        $.tam = 1

    asig-espacio-tipo2(tipo_string()): skip

    asig-espacio-tipo1(tipo_ident(id)):
        asig-espacio-tipo1($.vinculo)
        sea $.vinculo = var(Tipo,_) en
            $.tam = Tipo.tam

    asig-espacio-tipo2(tipo_ident(id)): skip

    asig-espacio(tipo_struct(LVar)):
        asig-espacio(LVar)

    asig-espacio(si_inst(LInst)):
        asig-espacio(LInst):

    asig-espacio(no_inst()): skip

    asig-espacio(muchas_inst(LInst,Inst)):
        asig-espacio(LInst)
        asig-espacio(Inst)

    asig-espacio(una_inst(Inst)):
        asig-espacio(Inst)

    asig-espacio(si_pformal(LPFml)):
        asig-espacio(LPFml)

    asig-espacio(no_pformal()): skip

    asig-espacio(muchos_pformal(LPFml,PFml)):
        asig-espacio(LPFml)
        asig-espacio(PFml)

    asig-espacio(un_pformal(PFml))
        asig-espacio(PFml)

    asig-espacio(pformal_ref(Tipo,id)):
        $.dir = dir
        $.nivel = nivel
        asig-espacio-tipo(Tipo)
        dir += Tipo.tam

    asig-espacio(pformal_noref(Tipo,id)):
        $.dir = dir
        $.nivel = nivel
        asig-espacio-tipo(Tipo)
        dir += Tipo.tam
        

    asig-espacio(si_preales(LPReal)):
        asig-espacio(LPReal)

    asig-espacio(no_preales()): skip

    asig-espacio(muchas_exp(LPReal,Exp)):
        asig-espacio(LPReal)
        asig-espacio(Exp)

    asig-espacio(una_exp(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_eval(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_if(Exp,Blo)):
        asig-espacio(Exp)
        asig-espacio(Blo)

    asig-espacio(inst_else(Exp,Blo1,Blo2)):
        asig-espacio(Exp)
        asig-espacio(Blo1)
        asig-espacio(Blo2)

    asig-espacio(inst_while(Exp,Blo)):
        asig-espacio(Exp)
        asig-espacio(Blo)

    asig-espacio(inst_new(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_delete(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_read(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_write(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_call(id,PReales)):
        ant_dir = dir 
        nivel = nivel + 1
        $.nivel = nivel
        dir = 0 
        asigna_espacio(PReales)
        $.tam_datos = dir 
        dir = ant_dir 
        nivel = nivel - 1 

    asig-espacio(inst_nl()): skip

    asig-espacio(inst_blo(Blo)):
        asig-espacio(Blo)

    asig-espacio(exp_asig(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_menor(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_menIgual(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_mayor(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_mayIgual(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_igual(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_dist(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_sum(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_resta(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_mult(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_div(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_mod(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_and(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_or(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-espacio(exp_menos(Exp)):
        asig-espacio(Exp)

    asig-espacio(exp_not(Exp)):
        asig-espacio(Exp)

    asig-espacio(inst_index(Opnd0,Opnd1)):
        asig-espacio(Opnd0)
        asig-espacio(Opnd1)

    asig-tam1(exp_reg(Exp,id)):
        ant_dir = dir 
        nivel = nivel + 1
        $.nivel = nivel
        dir = 0 
        asigna_espacio(Exp)
        $.tam_datos = dir 
        dir = ant_dir 
        nivel = nivel - 1 
       

    asig-espacio(exp_ind(Exp)):
        asig-espacio(Exp)

    asig-espacio(exp_true()): skip

    asig-espacio(exp_false()): skip

    asig-espacio(exp_litEnt(litEnt)): skip

    asig-espacio(exp_litReal(litReal)): skip

    asig-espacio(exp_litCad(litCad)): skip

    asig-espacio-tipo1(exp_iden(id)):
        asig-espacio-tipo1($.vinculo)
        sea $.vinculo = dec_type(Tipo,_) en
            $.tam = Tipo.tam
            
    asig-espacio-tipo2(exp_iden(id)): skip

    asig-espacio(exp_null()): skip


\end{lstlisting}
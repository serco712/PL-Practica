\chapterA{Instrucciones de la máquina-p necesarias para soportar la traducción de Tiny a código-p}


\subsection{Instrucciones Aritmético-Lógicas}

Estas instrucciones:

\begin{itemize}
    \item \textit{Desapilan los argumentos de la pila de evaluación (los argumentos aparecen en la pila en orden inverso; por ejemplo,
si la operación necesita dos argumentos, en la cima estará el 2º argumento, en la sub-cima el 1er argumento)}.
    \item \textit{ Realizan la operación}.
    \item \textit{Apilan el resultado en la pila de evaluación.}
    
\end{itemize}
 
\begin{longtblr}[
    caption = {Instrucciones Aritmético-Lógicas}
]{
    colspec = {|X|X|},
    rowhead = 1,
    row{even} = {gray9},
    row{1} = {olive9},
}
    \hline
    \textbf{} \\ \hline
    suma &  Desapila los 2 primeros argumentos de la pila y apila su suma\\ \hline
    resta & Desapila los 2 primeros argumentos de la pila y apila su resta \\ \hline
    menos & Desapila el primer argumento de la pila y apila su negativo \\ \hline
    mult &  Desapila los 2 primeros argumentos de la pila y apila su multiplicación\\ \hline
    div &  Desapila los 2 primeros argumentos de la pila y apila su división\\ \hline
    mod &  Desapila los 2 primeros argumentos de la pila y apila su módulo\\ \hline
    and &  Desapila los 2 primeros argumentos de la pila y apila el resultado de la operación and\\ \hline
    or & Desapila los 2 primeros argumentos de la pila y apila el resultado de la operación or \\ \hline
    not & Desapila el primer argumento de la pila y apila su contrario \\ \hline
    asig & Desapila los 2 primeros argumentos de la pila y apila el resultado de la operación asignación \\ \hline
    menor & Desapila los 2 primeros argumentos de la pila y apila true si el primer argumento es menor  \\ \hline
    menIgual &  Desapila los 2 primeros argumentos de la pila y apila true si el primer argumento es menor o igual\\ \hline
    mayor & Desapila los 2 primeros argumentos de la pila y apila true si el primer argumento es mayor \\ \hline
    mayIgual & Desapila los 2 primeros argumentos de la pila y apila true si el primer argumento es mayor o igual \\ \hline
    igual  &  Desapila los 2 primeros argumentos de la pila y apila true si ambos argumentos son iguales\\ \hline
    distinto &  Desapila los 2 primeros argumentos de la pila y apila true si los argumentos son distintos\\ \hline
    
\end{longtblr}

\subsection{Instrucciones de movimiento de datos}

\begin{longtblr}[
    caption = {Instrucciones de movimiento de datos}
]{
    colspec = {|X|X|},
    rowhead = 1,
    row{even} = {gray9},
    row{1} = {olive9},
}
    \hline
    \textbf{} \\ \hline
    apilaInt(v) & Apila el valor entero v en la pila de evaluación  \\ \hline
    apilaIden(v) & Apila el valor del identificador v en la pila de evaluación  \\ \hline
    apilaBool(v) & Apila el valor booleano v en la pila de evaluación   \\ \hline
    apilaReal(v) & Apila el valor real v en la pila de evaluación  \\ \hline
    apilaString(v) & Apila la cadena de caracteres v en la pila de evaluación  \\ \hline
    apilaInd & Desapila una dirección (dir) de la pila de evaluación, y apila (en
dicha pila) el contenido de la celda (dir) en la memoria de datos  \\ \hline

    desapilaind & Desapila el valor v y una dirección (dir) de la pila de evaluación (primero v, después d), y actualiza el contenido de la celda dir en la memoria de datos con el valor de v  \\ \hline
    mueve(n) & Desapila dos direcciones dir1 y dir0 de la pila de evaluación en ese orden y copia el contenido de las n celdas consecutivas desde la dirección dir1 a las correspondientes n celdas que comienzan en la dirección dir0. \\ \hline

    cast(v1, v1') & v1 se convierte al valor real equivalente v1'. \\ \hline
\end{longtblr}

\subsection{Instrucciones de salto}

\begin{longtblr}[
    caption = {Instrucciones de salto}
]{
    colspec = {|X|X|},
    rowhead = 1,
    row{even} = {gray9},
    row{1} = {olive9},
}
    \hline
    \textbf{} \\ \hline
    irA(d) &  Salto incondicional a la dirección d.  \\ \hline
    irF(d) &  Desapila el valor v. Si es falso salta a la dirección d.\\ \hline
    irV(d) &  Desqapila el valor v. Si es verdadero salta a la dirección d. \\ \hline
    irInd & Desapila una dirección d de la pila de evaluación, y realiza
un salto incondicional a dicha dirección  \\ \hline

    
\end{longtblr}

\subsection{Instrucciones de gestión de memoria dinámica}

\begin{longtblr}[
    caption = {Instrucciones de gestión de memoria dinámica}
]{
    colspec = {|X|X|},
    rowhead = 1,
    row{even} = {gray9},
    row{1} = {olive9},
}
    \hline
    \textbf{} \\ \hline
     alloc(t)& e reserva una zona de memoria adecuada para almacenar valores del tipo t. La operación en sí devuelve la dirección de comienzo de dicha zona de memoria.  \\ \hline
     dealloc(d,t)& Se notifica que la zona de memoria que comienza en d y que permite almacenar valores del tipo t queda liberada  \\ \hline
     fetch(d)& Devuelve el valor almacenado en la celda direccionada por d.\\ \hline
     store(d,v)& Almacena v en la celda direccionada por d.\\ \hline
     copy(d,d',t)& Copia el valor del tipo t que se encuentra almacenado a partir de la dirección d’ en el bloque que comienza a partir de la dirección d \\ \hline
     indx(d,i,t)& Considera que, a partir de d, comienza un array cuyos elementos son valores del tipo t, y devuelve la dirección de comienzo del elemento i-esimo de dicho array.\\ \hline
     acc(d,c,t) &Con t un tipo record. Considera que, a partir de d, está almacenado un registro de tipo t, que contiene un campo c. Devuelve la dirección de comienzo de dicho campo.\\ \hline

     dir(u)&  Dirección de la variable u. \\ \hline 
 
\end{longtblr}
    
\subsection{Instrucciones de Soporte de la ejecución de procedimientos}

\begin{longtblr}[
    caption = {Instrucciones de Soporte de la ejecución de procedimientos}
]{
    colspec = {|X|X|},
    rowhead = 1,
    row{even} = {gray9},
    row{1} = {olive9},
}
    \hline
    \textbf{} \\ \hline
     activa(n,t,dir) & Reserva espacio en el segmento de pila de registros de
activación para ejecutar un procedimiento que tiene nivel de
anidamiento  \textbf{n} y tamaño de datos locales \textbf{t}. Así mismo,
almacena en la zona de control de dicho registro \textbf{dir} como
dirección de retorno. También almacena en dicha zona de
control el valor del display de nivel \textbf{n}. Por último, apila en la
pila de evaluación la dirección de comienzo de los datos en el
registro creado  \\ \hline

    apilad(n) &  Apila en la pila de evaluación el valor del display de nivel \textbf{n}\\ \hline
    
    desapilad(n) & Desapila una dirección \textbf{dir} de la pila de evaluación en el
display de nivel \textbf{n}  \\ \hline 

    desactiva(n,t) & Libera el espacio ocupado por el registro de activación
actual, restaurando adecuadamente el estado de la máquina. \textbf{n}
indica el nivel de anidamiento del procedimiento asociado; \textbf{t}
el tamaño de los datos locales. De esta forma, la instrucción:
(i) apila en la pila de evaluación la dirección de retorno; (ii)
restaura el valor del display de nivel \textbf{n} al antiguo valor
guardado en el registro; (iii) decrementa el puntero de pila de
registros de activación en el tamaño ocupado por el registro  \\ \hline
     dup& Consulta el valor \textbf{v} de la cima de la pila y
apila de nuevo dicho valor.  \\ \hline
    stop & Detiene la máquina-p  \\ \hline 

 
\end{longtblr}


